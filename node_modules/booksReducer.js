import { v4 as uuid } from "uuid";
import { ADD_BOOK, TOGGLE_READ, EDIT_BOOK, DELETE_BOOK } from "../actions/booksActions";

const initial = [{ id: uuid(), title: "The Hobbit", author: "Tolkien", genre: "Fantasy", read: true }];
export default function booksReducer(state = initial, a) {
  switch (a.type) {
    case ADD_BOOK: return [...state, { ...a.payload, id: uuid() }];
    case TOGGLE_READ: return state.map(b => b.id === a.payload ? { ...b, read: !b.read } : b);
    case EDIT_BOOK: return state.map(b => b.id === a.payload.id ? { ...b, ...a.payload } : b);
    case DELETE_BOOK: return state.filter(b => b.id !== a.payload);
    default: return state;
  }
}
